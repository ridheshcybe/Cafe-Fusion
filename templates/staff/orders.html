{% extends 'layout.html' %}
{% block title %}Pending Orders - Caf√© Fusion{% endblock %}
{% block content %}
<div class="d-flex justify-content-between align-items-center mb-3">
  <h1 class="h3 m-0">Pending Online Orders</h1>
  <a class="btn btn-outline-secondary" href="{{ url_for('staff.counter_form') }}">Counter / POS</a>
</div>

{% if not orders %}
  <div class="alert alert-success">No pending orders.</div>
{% else %}
  <div class="table-responsive">
    <table class="table table-striped">
      <thead>
        <tr>
          <th>ID</th>
          <th>Customer</th>
          <th>Created</th>
          <th class="text-end">Total</th>
          <th class="text-end">Actions</th>
        </tr>
      </thead>
      <tbody>
        {% for o in orders %}
          <tr>
            <td><a href="{{ url_for('orders.order_status', order_id=o.id) }}">#{{ o.id }}</a></td>
            <td>{{ o.customer_name }}<div class="small text-muted">{{ o.customer_phone }}</div></td>
            <td>{{ o.created_at.strftime('%Y-%m-%d %H:%M') }}</td>
            <td class="text-end">{{ o.total_cents|money }}</td>
            <td class="text-end">
              <div class="d-flex gap-2 justify-content-end">
                <form method="post" action="{{ url_for('staff.confirm_order', order_id=o.id) }}">
                  <button class="btn btn-sm btn-success" type="submit">Confirm</button>
                </form>
                <form method="post" action="{{ url_for('staff.cancel_order', order_id=o.id) }}">
                  <button class="btn btn-sm btn-danger" type="submit">Cancel</button>
                </form>
                <a class="btn btn-sm btn-outline-dark" href="{{ url_for('staff.invoice_pdf', order_id=o.id) }}">Invoice PDF</a>
              </div>
            </td>
          </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
{% endif %}
{% endblock %}
